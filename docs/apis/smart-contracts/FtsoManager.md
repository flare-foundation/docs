---
title: FtsoManager
---

<!-- This is an autogenerated file. Do not edit! -->

# `FtsoManager` { #ct_ftsomanager }

<div class="api-node-source" markdown>
[Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol) | Inherits from [IIFtsoManager](./IIFtsoManager.md), [GovernedAndFlareDaemonized](./GovernedAndFlareDaemonized.md), [AddressUpdatable](./AddressUpdatable.md), [RevertErrorTracking](./RevertErrorTracking.md)
</div>

<div class="api-node-internal" markdown>

FTSO Manager contract.

It is in charge of:

- Defining reward epochs (few days).
- Choosing a single block each reward epoch that represents vote power of this epoch.
- Keeping track of all FTSO contracts.
- Every price epoch (few minutes):
    - Randomly choose one FTSO for rewarding calculations.
    - Trigger finalize price reveal epoch.
    - Determine addresses and reward weights and triggers reward distribution.

</div>

<div class="api-node-type" markdown>

## Functions

<div class="api-node" markdown>

### `activate` { #fn_activate }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function activate(
) external;
```

Activates FTSO manager ([`daemonize`](#fn_daemonize) will run jobs).

Only [`governance`](#fn_governance) can call this method.

</div>
</div>

<div class="api-node" markdown>

### `active` { #fn_active }

<div class="api-node-source" markdown>
Defined in `IFtsoManager` ([Docs](./IFtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/userInterfaces/IFtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function active(
) external view returns (
    bool);
```

Returns whether the FTSO Manager is [`active`](#fn_active) or not.

| Returns | Type | Description |
| ------- | ---- | ----------- |
| [0] | `bool` | bool Active status. |
</div>
</div>

<div class="api-node" markdown>

### `addFtso` { #fn_addftso }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function addFtso(
    contract IIFtso _ftso
) external;
```

Adds FTSO to the list of managed FTSOs, to support a new price pair.
All FTSOs in a multi-asset FTSO must be managed by the same FTSO manager.

Only [`governance`](#fn_governance) can call this method.

| Parameters | Type | Description |
| ---------- | ---- | ----------- |
| `_ftso` | `contract IIFtso` | FTSO contract address to add. |

</div>
</div>

<div class="api-node" markdown>

### `addFtsosBulk` { #fn_addftsosbulk }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function addFtsosBulk(
    contract IIFtso[] _ftsos
) external;
```

Adds a list of FTSOs to the list of managed FTSOs, to support new price pairs.
All FTSOs in a multi-asset FTSO must be managed by the same FTSO manager.

Only [`governance`](#fn_governance) can call this method.

| Parameters | Type | Description |
| ---------- | ---- | ----------- |
| `_ftsos` | `contract IIFtso[]` | Array of FTSO contract addresses to add. |

</div>
</div>

<div class="api-node" markdown>

### `cancelGovernanceCall` { #fn_cancelgovernancecall }

<div class="api-node-source" markdown>
Defined in `GovernedBase` ([Docs](./GovernedBase.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/governance/implementation/GovernedBase.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function cancelGovernanceCall(
    bytes4 _selector
) external;
```

Cancel a timelocked [`governance`](#fn_governance) call before it has been executed.

Only [`governance`](#fn_governance) can call this method.

| Parameters | Type | Description |
| ---------- | ---- | ----------- |
| `_selector` | `bytes4` | The method selector. |

</div>
</div>

<div class="api-node" markdown>

### `constructor` { #fn_constructor }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
constructor(
    address _governance,
    contract FlareDaemon _flareDaemon,
    address _addressUpdater,
    contract IIFtsoManagerV1 _oldFtsoManager,
    uint256 _firstPriceEpochStartTs,
    uint256 _priceEpochDurationSeconds,
    uint256 _revealEpochDurationSeconds,
    uint256 _firstRewardEpochStartTs,
    uint256 _rewardEpochDurationSeconds,
    uint256 _votePowerIntervalFraction
) public;
```

</div>
</div>

<div class="api-node" markdown>

### `constructor` { #fn_constructor }

<div class="api-node-source" markdown>
Defined in `GovernedAndFlareDaemonized` ([Docs](./GovernedAndFlareDaemonized.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/utils/implementation/GovernedAndFlareDaemonized.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
constructor(
    address _governance,
    contract FlareDaemon _flareDaemon
) public;
```

</div>
</div>

<div class="api-node" markdown>

### `constructor` { #fn_constructor }

<div class="api-node-source" markdown>
Defined in `Governed` ([Docs](./Governed.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/governance/implementation/Governed.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
constructor(
    address _governance
) public;
```

| Parameters | Type | Description |
| ---------- | ---- | ----------- |
| `_governance` | `address` | Governance contract. Must not be zero. |

</div>
</div>

<div class="api-node" markdown>

### `currentRewardEpochEnds` { #fn_currentrewardepochends }

<div class="api-node-source" markdown>
Defined in `IIFtsoManager` ([Docs](./IIFtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/interface/IIFtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function currentRewardEpochEnds(
) external view returns (
    uint256);
```

Returns when the current reward epoch finishes.

| Returns | Type | Description |
| ------- | ---- | ----------- |
| [0] | `uint256` | uint256 Time in seconds since the UNIX epoch when the current reward epoch will finish. |
</div>
</div>

<div class="api-node" markdown>

### `daemonize` { #fn_daemonize }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function daemonize(
) external returns (
    bool);
```

Implement this function to receive a trigger from the [`FlareDaemon`](./FlareDaemon.md).
The trigger method is called by the validator right at the end of block state transition.

Only [`flareDaemon`](#va_flaredaemon) can call this method.

| Returns | Type | Description |
| ------- | ---- | ----------- |
| [0] | `bool` | bool Whether the contract is still active after the call. Currently unused. |
</div>
</div>

<div class="api-node" markdown>

### `deactivateFtsos` { #fn_deactivateftsos }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function deactivateFtsos(
    contract IIFtso[] _ftsos
) external;
```

Deactivates FTSOs that are no longer used on FTSO registry.
Only [`governance`](#fn_governance) can call this method.

| Parameters | Type | Description |
| ---------- | ---- | ----------- |
| `_ftsos` | `contract IIFtso[]` | Array of FTSO contract addresses to deactivate. |

</div>
</div>

<div class="api-node" markdown>

### `executeGovernanceCall` { #fn_executegovernancecall }

<div class="api-node-source" markdown>
Defined in `GovernedBase` ([Docs](./GovernedBase.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/governance/implementation/GovernedBase.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function executeGovernanceCall(
    bytes4 _selector
) external;
```

Execute the timelocked [`governance`](#fn_governance) calls once the timelock period expires.

Only executor can call this method.

| Parameters | Type | Description |
| ---------- | ---- | ----------- |
| `_selector` | `bytes4` | The method selector (only one timelocked call per method is stored). |

</div>
</div>

<div class="api-node" markdown>

### `ftsoRegistry` { #fn_ftsoregistry }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function ftsoRegistry(
) external view returns (
    contract IIFtsoRegistry);
```

Returns the [`FtsoRegistry`](./FtsoRegistry.md) contract address.

</div>
</div>

<div class="api-node" markdown>

### `getAddressUpdater` { #fn_getaddressupdater }

<div class="api-node-source" markdown>
Defined in `AddressUpdatable` ([Docs](./AddressUpdatable.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/addressUpdater/implementation/AddressUpdatable.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function getAddressUpdater(
) public view returns (
    address _addressUpdater);
```

Returns the configured address updater.

| Returns | Type | Description |
| ------- | ---- | ----------- |
| `_addressUpdater` | `address` | The `AddresUpdater` contract that can update our contract address list, as a response to a governance call. |
</div>
</div>

<div class="api-node" markdown>

### `getContractName` { #fn_getcontractname }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function getContractName(
) external pure returns (
    string);
```

Implement this function to allow updating daemonized contracts through the [`AddressUpdater`](./AddressUpdater.md).

| Returns | Type | Description |
| ------- | ---- | ----------- |
| [0] | `string` | string Contract name. |
</div>
</div>

<div class="api-node" markdown>

### `getCurrentPriceEpochData` { #fn_getcurrentpriceepochdata }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function getCurrentPriceEpochData(
) external view returns (
    uint256 _priceEpochId,
    uint256 _priceEpochStartTimestamp,
    uint256 _priceEpochEndTimestamp,
    uint256 _priceEpochRevealEndTimestamp,
    uint256 _currentTimestamp);
```

Returns timing information for the current price epoch.
All intervals are half-closed: end time is not included.
All timestamps are in seconds since UNIX epoch.

See the [FTSO page](https://docs.flare.network/tech/ftso/#data-submission-process)
for information about the different submission phases.

| Returns | Type | Description |
| ------- | ---- | ----------- |
| `_priceEpochId` | `uint256` | Price epoch ID. |
| `_priceEpochStartTimestamp` | `uint256` | Beginning of the commit phase. |
| `_priceEpochEndTimestamp` | `uint256` | End of the commit phase. |
| `_priceEpochRevealEndTimestamp` | `uint256` | End of the reveal phase. |
| `_currentTimestamp` | `uint256` | Current time. |
</div>
</div>

<div class="api-node" markdown>

### `getCurrentPriceEpochId` { #fn_getcurrentpriceepochid }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function getCurrentPriceEpochId(
) external view returns (
    uint256 _priceEpochId);
```

Returns current price epoch ID.

| Returns | Type | Description |
| ------- | ---- | ----------- |
| `_priceEpochId` | `uint256` | Currently running epoch ID. IDs are consecutive numbers starting from zero. |
</div>
</div>

<div class="api-node" markdown>

### `getCurrentRewardEpoch` { #fn_getcurrentrewardepoch }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function getCurrentRewardEpoch(
) external view returns (
    uint256);
```

Returns current reward epoch ID (the one currently running).

| Returns | Type | Description |
| ------- | ---- | ----------- |
| [0] | `uint256` | Reward epoch ID. A monotonically increasing integer. |
</div>
</div>

<div class="api-node" markdown>

### `getElasticBandWidthPPMFtso` { #fn_getelasticbandwidthppmftso }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function getElasticBandWidthPPMFtso(
    contract IIFtso _ftso
) external view returns (
    uint256);
```

Returns the secondary band's width in PPM (parts-per-million) of the median value,
for a given FTSO.

| Parameters | Type | Description |
| ---------- | ---- | ----------- |
| `_ftso` | `contract IIFtso` | The queried FTSO contract address. |

| Returns | Type | Description |
| ------- | ---- | ----------- |
| [0] | `uint256` | uint256 Secondary band width in PPM. To obtain the actual band width, divide this number by 10^6 and multiply by the price median value. |
</div>
</div>

<div class="api-node" markdown>

### `getFallbackMode` { #fn_getfallbackmode }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function getFallbackMode(
) external view returns (
    bool _fallbackMode,
    contract IIFtso[] _ftsos,
    bool[] _ftsoInFallbackMode);
```

Returns whether the FTSO Manager is currently in fallback mode.

In this mode only submissions from trusted providers are used.

| Returns | Type | Description |
| ------- | ---- | ----------- |
| `_fallbackMode` | `bool` | True if fallback mode is enabled for the manager. |
| `_ftsos` | `contract IIFtso[]` | Array of all currently active FTSO assets. |
| `_ftsoInFallbackMode` | `bool[]` | Boolean array indicating which FTSO assets are in fallback mode. If the FTSO Manager is in fallback mode then ALL FTSOs are in fallback mode. |
</div>
</div>

<div class="api-node" markdown>

### `getFtsos` { #fn_getftsos }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function getFtsos(
) external view returns (
    contract IIFtso[] _ftsos);
```

Returns the list of currently [`active`](#va_active) FTSOs.

| Returns | Type | Description |
| ------- | ---- | ----------- |
| `_ftsos` | `contract IIFtso[]` | Array of contract addresses for the FTSOs. |
</div>
</div>

<div class="api-node" markdown>

### `getGovernanceParameters` { #fn_getgovernanceparameters }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function getGovernanceParameters(
) external view returns (
    uint256 _maxVotePowerNatThresholdFraction,
    uint256 _maxVotePowerAssetThresholdFraction,
    uint256 _lowAssetUSDThreshold,
    uint256 _highAssetUSDThreshold,
    uint256 _highAssetTurnoutThresholdBIPS,
    uint256 _lowNatTurnoutThresholdBIPS,
    uint256 _elasticBandRewardBIPS,
    uint256 _rewardExpiryOffsetSeconds,
    address[] _trustedAddresses,
    bool _initialized,
    bool _changed);
```

Returns [`governance`](#fn_governance) parameters for FTSOs.

| Returns | Type | Description |
| ------- | ---- | ----------- |
| `_maxVotePowerNatThresholdFraction` | `uint256` | High threshold for native token vote power per voter. |
| `_maxVotePowerAssetThresholdFraction` | `uint256` | High threshold for asset vote power per voter |
| `_lowAssetUSDThreshold` | `uint256` | Threshold for low asset vote power (in scaled USD). |
| `_highAssetUSDThreshold` | `uint256` | Threshold for high asset vote power (in scaled USD). |
| `_highAssetTurnoutThresholdBIPS` | `uint256` | Threshold for high asset turnout (in BIPS). |
| `_lowNatTurnoutThresholdBIPS` | `uint256` | Threshold for low nat turnout (in BIPS). |
| `_elasticBandRewardBIPS` | `uint256` | Secondary reward band, where _elasticBandRewardBIPS goes to the secondary band and 10000 - _elasticBandRewardBIPS to the primary (IQR) band. |
| `_rewardExpiryOffsetSeconds` | `uint256` | Reward epochs closed earlier than block.timestamp - _rewardExpiryOffsetSeconds expire. |
| `_trustedAddresses` | `address[]` | Trusted addresses will be used as a fallback mechanism for setting the price. |
| `_initialized` | `bool` |  |
| `_changed` | `bool` |  |
</div>
</div>

<div class="api-node" markdown>

### `getLastUnprocessedPriceEpochData` { #fn_getlastunprocessedpriceepochdata }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function getLastUnprocessedPriceEpochData(
) external view returns (
    uint256 _lastUnprocessedPriceEpoch,
    uint256 _lastUnprocessedPriceEpochRevealEnds,
    bool _lastUnprocessedPriceEpochInitialized);
```

Returns information regarding the currently unprocessed price epoch.
This epoch is not necessarily the last one, in case the network halts for some
time due to validator node problems, for example.

| Returns | Type | Description |
| ------- | ---- | ----------- |
| `_lastUnprocessedPriceEpoch` | `uint256` | ID of the price epoch that is currently waiting finalization. |
| `_lastUnprocessedPriceEpochRevealEnds` | `uint256` | When that price epoch can be finalized, in seconds since UNIX epoch. |
| `_lastUnprocessedPriceEpochInitialized` | `bool` | Whether this price epoch has been already initialized and therefore it must be finalized before the corresponding reward epoch can be finalized. |
</div>
</div>

<div class="api-node" markdown>

### `getPriceEpochConfiguration` { #fn_getpriceepochconfiguration }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function getPriceEpochConfiguration(
) external view returns (
    uint256 _firstPriceEpochStartTs,
    uint256 _priceEpochDurationSeconds,
    uint256 _revealEpochDurationSeconds);
```

Returns the current values for price epoch timing configuration.

See the [FTSO page](https://docs.flare.network/tech/ftso/#data-submission-process)
for information about the different submission phases.

| Returns | Type | Description |
| ------- | ---- | ----------- |
| `_firstPriceEpochStartTs` | `uint256` | Timestamp, in seconds since UNIX epoch, of the first price epoch. |
| `_priceEpochDurationSeconds` | `uint256` | Duration in seconds of the commit phase. |
| `_revealEpochDurationSeconds` | `uint256` | Duration in seconds of the reveal phase. |
</div>
</div>

<div class="api-node" markdown>

### `getPriceSubmitter` { #fn_getpricesubmitter }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function getPriceSubmitter(
) external view returns (
    contract IIPriceSubmitter);
```

Returns the [`PriceSubmitter`](./PriceSubmitter.md) contract.

</div>
</div>

<div class="api-node" markdown>

### `getRewardEpochConfiguration` { #fn_getrewardepochconfiguration }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function getRewardEpochConfiguration(
) external view returns (
    uint256 _firstRewardEpochStartTs,
    uint256 _rewardEpochDurationSeconds);
```

Returns the current values for reward epoch timing configuration.

See the [Reward epochs](https://docs.flare.network/tech/ftso/#vote-power) box.

| Returns | Type | Description |
| ------- | ---- | ----------- |
| `_firstRewardEpochStartTs` | `uint256` | Timestamp, in seconds since UNIX epoch, of the first reward epoch. |
| `_rewardEpochDurationSeconds` | `uint256` | Duration in seconds of the reward epochs. |
</div>
</div>

<div class="api-node" markdown>

### `getRewardEpochData` { #fn_getrewardepochdata }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function getRewardEpochData(
    uint256 _rewardEpochId
) public view returns (
    struct IIFtsoManager.RewardEpochData);
```

Returns data regarding a specific reward epoch ID.

| Parameters | Type | Description |
| ---------- | ---- | ----------- |
| `_rewardEpochId` | `uint256` | Epoch ID. |

| Returns | Type | Description |
| ------- | ---- | ----------- |
| [0] | `struct IIFtsoManager.RewardEpochData` | RewardEpochData Its associated data. |
</div>
</div>

<div class="api-node" markdown>

### `getRewardEpochToExpireNext` { #fn_getrewardepochtoexpirenext }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function getRewardEpochToExpireNext(
) external view returns (
    uint256);
```

Return reward epoch that will expire next, when a new reward epoch is initialized.

Reward epochs older than 90 days expire, and any unclaimed rewards in them become
inaccessible.

| Returns | Type | Description |
| ------- | ---- | ----------- |
| [0] | `uint256` | uint256 Reward epoch ID. |
</div>
</div>

<div class="api-node" markdown>

### `getRewardEpochVotePowerBlock` { #fn_getrewardepochvotepowerblock }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function getRewardEpochVotePowerBlock(
    uint256 _rewardEpoch
) external view returns (
    uint256 _votepowerBlock);
```

Returns the [vote power block](https://docs.flare.network/tech/ftso/#vote-power)
that was used for a past reward epoch.

| Parameters | Type | Description |
| ---------- | ---- | ----------- |
| `_rewardEpoch` | `uint256` | The queried reward epoch ID. |

| Returns | Type | Description |
| ------- | ---- | ----------- |
| `_votepowerBlock` | `uint256` | uint256 The block number of that reward epoch's vote power block. |
</div>
</div>

<div class="api-node" markdown>

### `getRewardExpiryOffsetSeconds` { #fn_getrewardexpiryoffsetseconds }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function getRewardExpiryOffsetSeconds(
) external view returns (
    uint256);
```

Returns the currently configured reward expiration time.

| Returns | Type | Description |
| ------- | ---- | ----------- |
| [0] | `uint256` | uint256 Unclaimed rewards accrued in reward epochs more than this amount of seconds in the past expire and become inaccessible. |
</div>
</div>

<div class="api-node" markdown>

### `getUpdateGovernanceParametersTs` { #fn_getupdategovernanceparametersts }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function getUpdateGovernanceParametersTs(
) external view returns (
    uint256);
```

Returns the timestamp, in seconds since UNIX epoch, when the scheduled new settings
will take effect.

</div>
</div>

<div class="api-node" markdown>

### `getVotePowerIntervalFraction` { #fn_getvotepowerintervalfraction }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function getVotePowerIntervalFraction(
) external view returns (
    uint256);
```

</div>
</div>

<div class="api-node" markdown>

### `governance` { #fn_governance }

<div class="api-node-source" markdown>
Defined in `GovernedBase` ([Docs](./GovernedBase.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/governance/implementation/GovernedBase.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function governance(
) public view returns (
    address);
```

Returns the current effective [`governance`](#fn_governance) address.

</div>
</div>

<div class="api-node" markdown>

### `notInitializedFtsos` { #fn_notinitializedftsos }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function notInitializedFtsos(
    contract IIFtso _ftso
) external view returns (
    bool);
```

Returns whether an FTSO has been initialized.

| Returns | Type | Description |
| ------- | ---- | ----------- |
| [0] | `bool` | bool Initialization state. |
</div>
</div>

<div class="api-node" markdown>

### `removeFtso` { #fn_removeftso }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function removeFtso(
    contract IIFtso _ftso
) external;
```

Removes an FTSO from the list of managed FTSOs.
Reverts if FTSO is used in a multi-asset FTSO.
Deactivates the `_ftso`.

Only [`governance`](#fn_governance) can call this method.

| Parameters | Type | Description |
| ---------- | ---- | ----------- |
| `_ftso` | `contract IIFtso` | FTSO contract address to remove. |

</div>
</div>

<div class="api-node" markdown>

### `replaceFtso` { #fn_replaceftso }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function replaceFtso(
    contract IIFtso _ftsoToAdd,
    bool _copyCurrentPrice,
    bool _copyAssetOrAssetFtsos
) external;
```

Replaces one FTSO with another with the same symbol.
All FTSOs in a multi-asset FTSO must be managed by the same FTSO manager.
Deactivates the old FTSO.

Only [`governance`](#fn_governance) can call this method.

| Parameters | Type | Description |
| ---------- | ---- | ----------- |
| `_ftsoToAdd` | `contract IIFtso` | FTSO contract address to add. An existing FTSO with the same symbol will be removed. |
| `_copyCurrentPrice` | `bool` |  |
| `_copyAssetOrAssetFtsos` | `bool` |  |

</div>
</div>

<div class="api-node" markdown>

### `replaceFtsosBulk` { #fn_replaceftsosbulk }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function replaceFtsosBulk(
    contract IIFtso[] _ftsosToAdd,
    bool _copyCurrentPrice,
    bool _copyAssetOrAssetFtsos
) external;
```

Replaces a list of FTSOs with other FTSOs with the same symbol.
All FTSOs in a multi-asset FTSO must be managed by the same FTSO manager.
Deactivates the old FTSOs.

Only [`governance`](#fn_governance) can call this method.

| Parameters | Type | Description |
| ---------- | ---- | ----------- |
| `_ftsosToAdd` | `contract IIFtso[]` | Array of FTSO contract addresses to add. Every existing FTSO with the same symbols will be removed. |
| `_copyCurrentPrice` | `bool` |  |
| `_copyAssetOrAssetFtsos` | `bool` |  |

</div>
</div>

<div class="api-node" markdown>

### `rewardEpochDurationSeconds` { #fn_rewardepochdurationseconds }

<div class="api-node-source" markdown>
Defined in `IIFtsoManager` ([Docs](./IIFtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/interface/IIFtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function rewardEpochDurationSeconds(
) external view returns (
    uint256);
```

Currently configured reward epoch duration.

| Returns | Type | Description |
| ------- | ---- | ----------- |
| [0] | `uint256` | uint256 Reward epoch duration, in seconds. |
</div>
</div>

<div class="api-node" markdown>

### `rewardEpochs` { #fn_rewardepochs }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function rewardEpochs(
    uint256 _rewardEpochId
) external view returns (
    uint256 _votepowerBlock,
    uint256 _startBlock,
    uint256 _startTimestamp);
```

Returns information about a reward epoch.

| Parameters | Type | Description |
| ---------- | ---- | ----------- |
| `_rewardEpochId` | `uint256` | The epoch ID to query. |

| Returns | Type | Description |
| ------- | ---- | ----------- |
| `_votepowerBlock` | `uint256` | The [vote power block](https://docs.flare.network/tech/ftso/#vote-power) of the epoch. |
| `_startBlock` | `uint256` | The first block of the epoch. |
| `_startTimestamp` | `uint256` | Timestamp of the epoch start, in seconds since UNIX epoch. |
</div>
</div>

<div class="api-node" markdown>

### `rewardEpochsStartTs` { #fn_rewardepochsstartts }

<div class="api-node-source" markdown>
Defined in `IIFtsoManager` ([Docs](./IIFtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/interface/IIFtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function rewardEpochsStartTs(
) external view returns (
    uint256);
```

Time when the current reward epoch started.

| Returns | Type | Description |
| ------- | ---- | ----------- |
| [0] | `uint256` | uint256 Timestamp, in seconds since UNIX epoch. |
</div>
</div>

<div class="api-node" markdown>

### `setElasticBandWidthPPMFtsos` { #fn_setelasticbandwidthppmftsos }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function setElasticBandWidthPPMFtsos(
    uint256 _updateTs,
    contract IIFtso[] _ftsos,
    uint256[] _widths
) external;
```

Sets elastic band widths in PPM (parts-per-million) for given FTSOs.
Only [`governance`](#fn_governance) can call this method.

| Parameters | Type | Description |
| ---------- | ---- | ----------- |
| `_updateTs` | `uint256` | Timestamp when the changes will take effect, in seconds from UNIX epoch. |
| `_ftsos` | `contract IIFtso[]` | Array of FTSO contract addresses to update. |
| `_widths` | `uint256[]` | Array of secondary band widths in PPM. To obtain the actual band width, this number is divided by 10^6 and multiplied by the price median value. |

</div>
</div>

<div class="api-node" markdown>

### `setFallbackMode` { #fn_setfallbackmode }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function setFallbackMode(
    bool _fallbackMode
) external;
```

Sets whether the FTSO Manager is currently in fallback mode.
In this mode only submissions from trusted providers are used.

Only [`governance`](#fn_governance) can call this method.

| Parameters | Type | Description |
| ---------- | ---- | ----------- |
| `_fallbackMode` | `bool` | True if fallback mode is enabled. |

</div>
</div>

<div class="api-node" markdown>

### `setFtsoAsset` { #fn_setftsoasset }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function setFtsoAsset(
    contract IIFtso _ftso,
    contract IIVPToken _asset
) external;
```

Sets the asset tracked by an FTSO.

Only [`governance`](#fn_governance) can call this method.

| Parameters | Type | Description |
| ---------- | ---- | ----------- |
| `_ftso` | `contract IIFtso` | The FTSO contract address. |
| `_asset` | `contract IIVPToken` | The [`VPToken`](./VPToken.md) contract address of the asset to track. |

</div>
</div>

<div class="api-node" markdown>

### `setFtsoAssetFtsos` { #fn_setftsoassetftsos }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function setFtsoAssetFtsos(
    contract IIFtso _ftso,
    contract IIFtso[] _assetFtsos
) external;
```

Sets an array of FTSOs to be tracked by a multi-asset FTSO.
FTSOs implicitly determine the FTSO assets.

Only [`governance`](#fn_governance) can call this method.

| Parameters | Type | Description |
| ---------- | ---- | ----------- |
| `_ftso` | `contract IIFtso` | The multi-asset FTSO contract address. |
| `_assetFtsos` | `contract IIFtso[]` | Array of FTSOs to be tracked. |

</div>
</div>

<div class="api-node" markdown>

### `setFtsoFallbackMode` { #fn_setftsofallbackmode }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function setFtsoFallbackMode(
    contract IIFtso _ftso,
    bool _fallbackMode
) external;
```

Sets whether an FTSO is currently in fallback mode.
In this mode only submissions from trusted providers are used.

Only [`governance`](#fn_governance) can call this method.

| Parameters | Type | Description |
| ---------- | ---- | ----------- |
| `_ftso` | `contract IIFtso` | The FTSO contract address. |
| `_fallbackMode` | `bool` | Fallback mode. |

</div>
</div>

<div class="api-node" markdown>

### `setGovernanceParameters` { #fn_setgovernanceparameters }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function setGovernanceParameters(
    uint256 _updateTs,
    uint256 _maxVotePowerNatThresholdFraction,
    uint256 _maxVotePowerAssetThresholdFraction,
    uint256 _lowAssetUSDThreshold,
    uint256 _highAssetUSDThreshold,
    uint256 _highAssetTurnoutThresholdBIPS,
    uint256 _lowNatTurnoutThresholdBIPS,
    uint256 _elasticBandRewardBIPS,
    uint256 _rewardExpiryOffsetSeconds,
    address[] _trustedAddresses
) external;
```

Sets [`governance`](#fn_governance) parameters for FTSOs

Only [`governance`](#fn_governance) can call this method.

| Parameters | Type | Description |
| ---------- | ---- | ----------- |
| `_updateTs` | `uint256` | Time, in seconds since UNIX epoch, when updated settings should be pushed to FTSOs. |
| `_maxVotePowerNatThresholdFraction` | `uint256` | High threshold for native token vote power per voter. |
| `_maxVotePowerAssetThresholdFraction` | `uint256` | High threshold for asset vote power per voter |
| `_lowAssetUSDThreshold` | `uint256` | Threshold for low asset vote power (in scaled USD). |
| `_highAssetUSDThreshold` | `uint256` | Threshold for high asset vote power (in scaled USD). |
| `_highAssetTurnoutThresholdBIPS` | `uint256` | Threshold for high asset turnout (in BIPS). |
| `_lowNatTurnoutThresholdBIPS` | `uint256` | Threshold for low nat turnout (in BIPS). |
| `_elasticBandRewardBIPS` | `uint256` | Secondary reward band, where _elasticBandRewardBIPS goes to the secondary band and 10000 - _elasticBandRewardBIPS to the primary (IQR) band. |
| `_rewardExpiryOffsetSeconds` | `uint256` | Reward epochs closed earlier than block.timestamp - _rewardExpiryOffsetSeconds expire. |
| `_trustedAddresses` | `address[]` | Trusted addresses will be used as a fallback mechanism for setting the price. |

</div>
</div>

<div class="api-node" markdown>

### `setInitialRewardData` { #fn_setinitialrewarddata }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function setInitialRewardData(
    uint256 _nextRewardEpochToExpire,
    uint256 _rewardEpochsLength,
    uint256 _currentRewardEpochEnds
) external;
```

Set reward data to values from old ftso manager.
Can only be called before activation.

Only [`governance`](#fn_governance) can call this method.

| Parameters | Type | Description |
| ---------- | ---- | ----------- |
| `_nextRewardEpochToExpire` | `uint256` | See `getRewardEpochToExpireNext`. |
| `_rewardEpochsLength` | `uint256` | See `getRewardEpochConfiguration`. |
| `_currentRewardEpochEnds` | `uint256` | See `getCurrentRewardEpoch`. |

</div>
</div>

<div class="api-node" markdown>

### `setRewardEpochDurationSeconds` { #fn_setrewardepochdurationseconds }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function setRewardEpochDurationSeconds(
    uint256 _rewardEpochDurationSeconds
) external;
```

Sets the reward epoch duration.
Only [`governance`](#fn_governance) can call this method.

If the reward epoch is very short and the expiry offset is very long, the list of reward epochs
to be checked becomes very long. Therefore reward epoch time has to be capped to expiry offset.

</div>
</div>

<div class="api-node" markdown>

### `setUpdateOnRewardEpochSwitchover` { #fn_setupdateonrewardepochswitchover }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function setUpdateOnRewardEpochSwitchover(
    contract IUpdateValidators _updateValidators
) external;
```

Unused.

</div>
</div>

<div class="api-node" markdown>

### `setUseGoodRandom` { #fn_setusegoodrandom }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function setUseGoodRandom(
    bool _useGoodRandom,
    uint256 _maxWaitForGoodRandomSeconds
) external;
```

Allow [`governance`](#fn_governance) to switch to good random numbers only.
Only [`governance`](#fn_governance) can call this method.

See [`IFtsoManager`](./IFtsoManager.md).[`UseGoodRandomSet`](#ev_usegoodrandomset).

| Parameters | Type | Description |
| ---------- | ---- | ----------- |
| `_useGoodRandom` | `bool` | Whether good random numbers should be used or not. |
| `_maxWaitForGoodRandomSeconds` | `uint256` | Max time in seconds to wait for the good random. If there is none after given time, reward epoch finalization should proceed anyway. |

</div>
</div>

<div class="api-node" markdown>

### `setVotePowerIntervalFraction` { #fn_setvotepowerintervalfraction }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function setVotePowerIntervalFraction(
    uint256 _votePowerIntervalFraction
) external;
```

</div>
</div>

<div class="api-node" markdown>

### `showLastRevertedError` { #fn_showlastrevertederror }

<div class="api-node-source" markdown>
Defined in `RevertErrorTracking` ([Docs](./RevertErrorTracking.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/utils/implementation/RevertErrorTracking.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function showLastRevertedError(
) external view returns (
    uint256[] _lastErrorBlock,
    uint256[] _numErrors,
    string[] _errorString,
    address[] _erroringContract,
    uint256 _totalRevertedErrors);
```

Returns latest error information. All arrays will contain only one entry.

| Returns | Type | Description |
| ------- | ---- | ----------- |
| `_lastErrorBlock` | `uint256[]` | Array of block numbers where the errors occurred. |
| `_numErrors` | `uint256[]` | Array of number of times same error with same contract address has been reverted. |
| `_errorString` | `string[]` | Array of revert error messages. |
| `_erroringContract` | `address[]` | Array of addresses of the reverting contracts. |
| `_totalRevertedErrors` | `uint256` | Total number of revert errors across all contracts. |
</div>
</div>

<div class="api-node" markdown>

### `showRevertedErrors` { #fn_showrevertederrors }

<div class="api-node-source" markdown>
Defined in `RevertErrorTracking` ([Docs](./RevertErrorTracking.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/utils/implementation/RevertErrorTracking.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function showRevertedErrors(
    uint256 startIndex,
    uint256 numErrorTypesToShow
) public view returns (
    uint256[] _lastErrorBlock,
    uint256[] _numErrors,
    string[] _errorString,
    address[] _erroringContract,
    uint256 _totalRevertedErrors);
```

Returns latest errors.

| Parameters | Type | Description |
| ---------- | ---- | ----------- |
| `startIndex` | `uint256` | Starting index in the error list array. |
| `numErrorTypesToShow` | `uint256` | Number of errors to show. The total amount can be found in `errorData`. |

| Returns | Type | Description |
| ------- | ---- | ----------- |
| `_lastErrorBlock` | `uint256[]` | Array of block numbers where the errors occurred. |
| `_numErrors` | `uint256[]` | Array of number of times same error with same contract address has been reverted. |
| `_errorString` | `string[]` | Array of revert error messages. |
| `_erroringContract` | `address[]` | Array of addresses of the reverting contracts. |
| `_totalRevertedErrors` | `uint256` | Total number of revert errors across all contracts. |
</div>
</div>

<div class="api-node" markdown>

### `switchToFallbackMode` { #fn_switchtofallbackmode }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function switchToFallbackMode(
) external returns (
    bool);
```

This function will be called after an error is caught in [`daemonize`](#fn_daemonize).
It will switch the contract to a simpler fallback mode, which hopefully works when full mode doesn't.
Not every contract needs to support fallback mode ([`FtsoManager`](./FtsoManager.md) does), so this method may be empty.
Switching back to normal mode is left to the contract (typically a governed method call).
This function may be called due to low-gas error, so it shouldn't use more than ~30.000 gas.

Only [`flareDaemon`](#va_flaredaemon) can call this method.

| Returns | Type | Description |
| ------- | ---- | ----------- |
| [0] | `bool` | True if switched to fallback mode, false if already in fallback mode or if fallback mode is not supported. |
</div>
</div>

<div class="api-node" markdown>

### `switchToProductionMode` { #fn_switchtoproductionmode }

<div class="api-node-source" markdown>
Defined in `GovernedBase` ([Docs](./GovernedBase.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/governance/implementation/GovernedBase.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function switchToProductionMode(
) external;
```

Enter the production mode after all the initial [`governance`](#fn_governance) settings have been set.
This enables timelocks and the [`governance`](#fn_governance) can be obtained afterward by calling
[`governanceSettings`](#va_governancesettings).getGovernanceAddress().
Emits [`GovernedProductionModeEntered`](#ev_governedproductionmodeentered).

</div>
</div>

<div class="api-node" markdown>

### `updateContractAddresses` { #fn_updatecontractaddresses }

<div class="api-node-source" markdown>
Defined in `AddressUpdatable` ([Docs](./AddressUpdatable.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/addressUpdater/implementation/AddressUpdatable.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function updateContractAddresses(
    bytes32[] _contractNameHashes,
    address[] _contractAddresses
) external;
```

External method called from [`AddressUpdater`](./AddressUpdater.md) only.

</div>
</div>

<div class="api-node" markdown>

### `voterWhitelister` { #fn_voterwhitelister }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
function voterWhitelister(
) external view returns (
    contract IIVoterWhitelister);
```

Returns the [`VoterWhitelister`](./VoterWhitelister.md) contract address.

</div>
</div>

</div>

<div class="api-node-type" markdown>

## Variables

<div class="api-node" markdown>

### `MAX_TRUSTED_ADDRESSES_LENGTH` { #va_max_trusted_addresses_length }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
    uint256 MAX_TRUSTED_ADDRESSES_LENGTH
```

Maximum number of trusted addresses allowed.

</div>
</div>

<div class="api-node" markdown>

### `active` { #va_active }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
    bool active
```

Whether the FTSO Manager is [`active`](#va_active) or not.

</div>
</div>

<div class="api-node" markdown>

### `cleanupBlockNumberManager` { #va_cleanupblocknumbermanager }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
    contract CleanupBlockNumberManager cleanupBlockNumberManager
```

Address of the [`CleanupBlockNumberManager`](./CleanupBlockNumberManager.md) contract.

</div>
</div>

<div class="api-node" markdown>

### `currentRewardEpochEnds` { #va_currentrewardepochends }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
    uint256 currentRewardEpochEnds
```

Timestamp when the current reward epoch finishes, in seconds since UNIX epoch.

</div>
</div>

<div class="api-node" markdown>

### `errorData` { #va_errordata }

<div class="api-node-source" markdown>
Defined in `RevertErrorTracking` ([Docs](./RevertErrorTracking.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/utils/implementation/RevertErrorTracking.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
    struct RevertErrorTracking.LastErrorData errorData
```

Most recent error information.

</div>
</div>

<div class="api-node" markdown>

### `flareDaemon` { #va_flaredaemon }

<div class="api-node-source" markdown>
Defined in `GovernedAndFlareDaemonized` ([Docs](./GovernedAndFlareDaemonized.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/utils/implementation/GovernedAndFlareDaemonized.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
    contract FlareDaemon flareDaemon
```

The [`FlareDaemon`](./FlareDaemon.md) contract, set at construction time.

</div>
</div>

<div class="api-node" markdown>

### `governanceSettings` { #va_governancesettings }

<div class="api-node-source" markdown>
Defined in `GovernedBase` ([Docs](./GovernedBase.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/governance/implementation/GovernedBase.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
    contract IGovernanceSettings governanceSettings
```

Governance Settings.

</div>
</div>

<div class="api-node" markdown>

### `lastRewardedFtsoAddress` { #va_lastrewardedftsoaddress }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
    address lastRewardedFtsoAddress
```

Address of the FTSO contract that was last chosen for reward calculations.

</div>
</div>

<div class="api-node" markdown>

### `maxWaitForGoodRandomSeconds` { #va_maxwaitforgoodrandomseconds }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
    uint256 maxWaitForGoodRandomSeconds
```

Used only when [`useGoodRandom`](#va_usegoodrandom) flag is set.

</div>
</div>

<div class="api-node" markdown>

### `oldFtsoManager` { #va_oldftsomanager }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
    contract IIFtsoManagerV1 oldFtsoManager
```

Previous FTSO Manager, in case of a redeployment.

</div>
</div>

<div class="api-node" markdown>

### `priceSubmitter` { #va_pricesubmitter }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
    contract IIPriceSubmitter priceSubmitter
```

Address of the [`PriceSubmitter`](./PriceSubmitter.md) contract.

</div>
</div>

<div class="api-node" markdown>

### `productionMode` { #va_productionmode }

<div class="api-node-source" markdown>
Defined in `GovernedBase` ([Docs](./GovernedBase.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/governance/implementation/GovernedBase.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
    bool productionMode
```

When true, [`governance`](#fn_governance) is enabled and cannot be disabled. See [`switchToProductionMode`](#fn_switchtoproductionmode).

</div>
</div>

<div class="api-node" markdown>

### `rewardEpochDurationSeconds` { #va_rewardepochdurationseconds }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
    uint256 rewardEpochDurationSeconds
```

Duration of reward epochs, in seconds.

</div>
</div>

<div class="api-node" markdown>

### `rewardEpochsStartTs` { #va_rewardepochsstartts }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
    uint256 rewardEpochsStartTs
```

Timestamp when the first reward epoch started, in seconds since UNIX epoch.

</div>
</div>

<div class="api-node" markdown>

### `rewardManager` { #va_rewardmanager }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
    contract IIFtsoRewardManager rewardManager
```

Address of the `RewardManager` contract.

</div>
</div>

<div class="api-node" markdown>

### `supply` { #va_supply }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
    contract IISupply supply
```

</div>
</div>

<div class="api-node" markdown>

### `timelockedCalls` { #va_timelockedcalls }

<div class="api-node-source" markdown>
Defined in `GovernedBase` ([Docs](./GovernedBase.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/governance/implementation/GovernedBase.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
    mapping(bytes4 => struct GovernedBase.TimelockedCall) timelockedCalls
```

List of pending timelocked [`governance`](#fn_governance) calls.

</div>
</div>

<div class="api-node" markdown>

### `updateOnRewardEpochSwitchover` { #va_updateonrewardepochswitchover }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
    contract IUpdateValidators updateOnRewardEpochSwitchover
```

Unused.

</div>
</div>

<div class="api-node" markdown>

### `useGoodRandom` { #va_usegoodrandom }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
    bool useGoodRandom
```

Whether use of good random numbers is enforced. See [`IFtsoManager`](./IFtsoManager.md).[`UseGoodRandomSet`](#ev_usegoodrandomset).

</div>
</div>

<div class="api-node" markdown>

### `waitingForGoodRandomSinceTs` { #va_waitingforgoodrandomsincets }

<div class="api-node-source" markdown>
Defined in `FtsoManager` ([Docs](./FtsoManager.md), [Source](https://gitlab.com/flarenetwork/flare-smart-contracts/-/tree/master/contracts/ftso/implementation/FtsoManager.sol)).
</div>

<div class="api-node-internal" markdown>

```solidity
    uint256 waitingForGoodRandomSinceTs
```

Used only when [`useGoodRandom`](#va_usegoodrandom) flag is set.

</div>
</div>

</div>

